<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>English Resources</title>
<style>
*{box-sizing:border-box;margin:0;padding:0}
:root{--accent:#3c5277;--glow:#3c5277}
body{min-height:100vh;font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display",sans-serif;background:#000;color:#f5f5f7}
.bg{position:fixed;inset:0;z-index:-1}
.bg::before{content:"";position:absolute;inset:-50%;width:200%;height:200%;background:radial-gradient(ellipse 50% 40% at 50% 20%,rgba(41,151,255,0.4),transparent 50%),radial-gradient(ellipse 40% 30% at 80% 10%,rgba(191,90,242,0.35),transparent 40%),radial-gradient(ellipse 35% 25% at 20% 80%,rgba(48,209,88,0.3),transparent 40%);animation:drift 20s ease-in-out infinite alternate}
@keyframes drift{to{transform:translate(2%,2%)}}
.header{position:fixed;top:0;left:0;right:0;z-index:100;background:rgba(0,0,0,0.7);backdrop-filter:blur(20px);padding:16px 24px;border-bottom:1px solid rgba(255,255,255,0.08);transition:transform 0.4s,opacity 0.3s}
.header.hidden{transform:translateY(-100%);opacity:0}
.header-inner{max-width:1400px;margin:0 auto;display:flex;align-items:center;gap:18px}
.header-back{width:44px;height:44px;border-radius:12px;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.1);color:#f5f5f7;font-size:20px;cursor:pointer;display:none;align-items:center;justify-content:center}
.header-back.visible{display:flex}
.header-icon{width:52px;height:52px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:24px;box-shadow:0 8px 32px rgba(0,0,0,0.4),0 0 60px color-mix(in srgb,var(--glow) 60%,transparent);background-size:cover}
.header-text{flex:1}
.header-title{font-size:20px;font-weight:600}
.header-breadcrumb{font-size:13px;color:#86868b;margin-top:3px}
.header-count{font-size:13px;color:#86868b;padding:10px 18px;border-radius:999px;background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.08)}
.trigger{position:fixed;top:0;left:0;right:0;height:32px;z-index:99;cursor:pointer}
.trigger-dots{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;gap:6px}
.trigger-dot{width:6px;height:6px;border-radius:50%;background:rgba(255,255,255,0.12)}
.trigger:hover .trigger-dot{background:rgba(255,255,255,0.5)}
main{padding:28px;min-height:100vh;padding-top:110px;transition:padding-top 0.4s}
main.shift{padding-top:28px}
.page{max-width:1400px;margin:0 auto}
.controls{display:flex;flex-wrap:wrap;gap:14px;margin-bottom:28px;padding:24px;background:rgba(255,255,255,0.03);backdrop-filter:blur(20px);border-radius:20px;border:1px solid rgba(255,255,255,0.1);box-shadow:0 0 50px rgba(41,151,255,0.2)}
.search{flex:1;min-width:200px;position:relative}
.search::before{content:"üîç";position:absolute;left:18px;top:50%;transform:translateY(-50%);font-size:14px;opacity:0.5}
.search input{width:100%;padding:16px 18px 16px 52px;border-radius:14px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.04);font-size:16px;color:#f5f5f7}
.search input:focus{outline:none;border-color:var(--accent)}
select{padding:16px 42px 16px 18px;border-radius:14px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.04);font-size:16px;color:#f5f5f7;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12'%3E%3Cpath fill='%2386868b' d='M6 8L1 3h10z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 16px center}
select option{background:#1c1c1e}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:24px}
@media(min-width:1200px){.grid{grid-template-columns:repeat(auto-fill,minmax(360px,1fr))}}
.folder{background:rgba(255,255,255,0.04);backdrop-filter:blur(20px);border-radius:24px;padding:40px 32px;cursor:pointer;transition:all 0.4s;text-align:center;border:2px solid rgba(255,255,255,0.1);position:relative;overflow:hidden;box-shadow:0 0 50px color-mix(in srgb,var(--glow) 40%,transparent)}
.folder::before{content:"";position:absolute;inset:-3px;border-radius:27px;background:linear-gradient(135deg,color-mix(in srgb,var(--glow) 50%,transparent),color-mix(in srgb,#bf5af2 50%,transparent));z-index:-1;opacity:0.5}
.folder:hover{transform:translateY(-8px);border-color:rgba(255,255,255,0.3);box-shadow:0 30px 60px rgba(0,0,0,0.4),0 0 100px color-mix(in srgb,var(--glow) 60%,transparent)}
.folder:hover::before{opacity:0.8}
.folder-icon{width:96px;height:96px;border-radius:24px;margin:0 auto 24px;display:flex;align-items:center;justify-content:center;font-size:48px;box-shadow:0 16px 48px rgba(0,0,0,0.4),0 0 80px color-mix(in srgb,var(--glow) 50%,transparent);background-size:cover;position:relative;z-index:1}
.folder-name{font-size:22px;font-weight:600;color:#f5f5f7;margin-bottom:8px;position:relative;z-index:1}
.folder-count{font-size:15px;color:#86868b;position:relative;z-index:1}
.item{background:rgba(255,255,255,0.04);backdrop-filter:blur(20px);border-radius:20px;padding:28px;cursor:pointer;transition:all 0.4s;text-decoration:none;display:block;border:2px solid rgba(255,255,255,0.1);position:relative;overflow:hidden;box-shadow:0 0 40px rgba(41,151,255,0.25)}
.item::before{content:"";position:absolute;inset:-3px;border-radius:23px;background:linear-gradient(135deg,rgba(41,151,255,0.4),rgba(191,90,242,0.4));z-index:-1;opacity:0.4}
.item:hover{transform:translateY(-6px);border-color:rgba(255,255,255,0.3);box-shadow:0 24px 48px rgba(0,0,0,0.4),0 0 80px rgba(41,151,255,0.4)}
.item:hover::before{opacity:0.7}
.item.featured{background:linear-gradient(135deg,var(--accent),#bf5af2);border-color:transparent;box-shadow:0 0 60px rgba(191,90,242,0.6)}
.item.featured::before{display:none}
.item.featured *{color:white!important}
.item-head{display:flex;justify-content:space-between;margin-bottom:14px;position:relative;z-index:1}
.item-label{font-size:11px;text-transform:uppercase;letter-spacing:0.08em;color:#86868b;font-weight:600}
.item-badge{padding:6px 14px;border-radius:999px;background:linear-gradient(135deg,#30d158,#28a745);color:white;font-size:10px;font-weight:700;box-shadow:0 4px 20px rgba(48,209,88,0.6)}
.item-title{font-size:20px;font-weight:600;color:#f5f5f7;margin-bottom:12px;position:relative;z-index:1}
.item-desc{font-size:15px;color:#86868b;margin-bottom:20px;position:relative;z-index:1}
.item-meta{display:flex;justify-content:space-between;font-size:13px;color:#86868b;position:relative;z-index:1}
.item-link{color:var(--accent);font-weight:600}
.empty{text-align:center;padding:100px 32px;color:#86868b;grid-column:1/-1}
.empty-icon{font-size:72px;margin-bottom:24px;opacity:0.3}
.empty-title{font-size:22px;font-weight:600;color:#f5f5f7}
footer{margin-top:80px;padding:28px;text-align:center;font-size:13px;color:rgba(255,255,255,0.15)}
@media(max-width:768px){main{padding:20px;padding-top:100px}.grid{grid-template-columns:1fr}.controls{flex-direction:column}}
</style>
</head>
<body>
<div class="bg"></div>
<header class="header" id="header">
<div class="header-inner">
<button class="header-back" id="backBtn" onclick="goBack()">‚Üê</button>
<div class="header-icon" id="headerIcon" style="background:#3c5277">üìö</div>
<div class="header-text">
<div class="header-title" id="headerTitle">English Resources</div>
<div class="header-breadcrumb" id="headerBreadcrumb">Select a folder</div>
</div>
<div class="header-count" id="headerCount">Loading...</div>
</div>
</header>
<div class="trigger" id="trigger">
<div class="trigger-dots">
<div class="trigger-dot"></div>
<div class="trigger-dot"></div>
<div class="trigger-dot"></div>
</div>
</div>
<main id="main">
<div class="page">
<div class="controls" id="controls" style="display:none">
<div class="search"><input type="text" id="search" placeholder="Search..."></div>
<select id="sort">
<option value="newest">Newest</option>
<option value="oldest">Oldest</option>
<option value="title">A ‚Üí Z</option>
</select>
</div>
<div class="grid" id="grid"></div>
<footer>Powered by IndexForge</footer>
</div>
</main>
<script>
var DATA = {
  "folders": [
    {"id": "104f491e-6aa2-4931-a2e5-3f8e1bdb027b", "parentId": null, "name": "È´òÔºì", "icon": "üìÅ", "color": "#0b8e4a", "order": 0},
    {"id": "18109fdd-40a2-4ee4-84d5-050dcedf571a", "parentId": "104f491e-6aa2-4931-a2e5-3f8e1bdb027b", "name": "Ë´ñÁêÜ„ÉªË°®ÁèæIII", "icon": "üìÅ", "color": "#1e8044", "order": 0},
    {"id": "aac20107-d8fb-4522-be26-96e73758d7b1", "parentId": null, "name": "È´òÔºí", "icon": "üìÅ", "color": "#112f69", "order": 1},
    {"id": "be163e55-6b32-44d0-8a7c-13ec2f861c4e", "parentId": null, "name": "È´òÔºë", "icon": "üìÅ", "color": "#932546", "order": 2},
    {"id": "d157d289-5646-4c09-80f1-62f697e08b83", "parentId": "104f491e-6aa2-4931-a2e5-3f8e1bdb027b", "name": "Ëã±Ë™û„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥III", "icon": "üìÅ", "color": "#e5c93e", "order": 3}
  ],
  "items": [
    {"id": "63eeca2f-3384-4d99-a8b4-09fef7621ddc", "folderId": "18109fdd-40a2-4ee4-84d5-050dcedf571a", "title": "grammar_breakdown_1", "fileName": "grammar_breakdown_1.html", "filePath": "files/18109fdd-40a2-4ee4-84d5-050dcedf571a/grammar_breakdown_1.html", "date": "2025-12-03", "order": 0},
    {"id": "05949858-9fad-4704-aee3-22ceb40680fb", "folderId": "18109fdd-40a2-4ee4-84d5-050dcedf571a", "title": "grammar_breakdown_2", "fileName": "grammar_breakdown_2.html", "filePath": "files/18109fdd-40a2-4ee4-84d5-050dcedf571a/grammar_breakdown_2.html", "date": "2025-12-03", "order": 1},
    {"id": "09e78723-e199-4a32-980f-9c0eed25c8cc", "folderId": "18109fdd-40a2-4ee4-84d5-050dcedf571a", "title": "grammar_breakdown_3", "fileName": "grammar_breakdown_3.html", "filePath": "files/18109fdd-40a2-4ee4-84d5-050dcedf571a/grammar_breakdown_3.html", "date": "2025-12-03", "order": 2},
    {"id": "bf28facb-8c8b-43d7-a46c-733ee1beffa0", "folderId": "18109fdd-40a2-4ee4-84d5-050dcedf571a", "title": "grammar_breakdown_4", "fileName": "grammar_breakdown_4.html", "filePath": "files/18109fdd-40a2-4ee4-84d5-050dcedf571a/grammar_breakdown_4.html", "date": "2025-12-03", "order": 3},
    {"id": "50efb1ee-bb56-45da-8bea-7e6d9d7e2b60", "folderId": "18109fdd-40a2-4ee4-84d5-050dcedf571a", "title": "grammar_breakdown_5", "fileName": "grammar_breakdown_5.html", "filePath": "files/18109fdd-40a2-4ee4-84d5-050dcedf571a/grammar_breakdown_5.html", "date": "2025-12-03", "order": 4},
    {"id": "d3567532-848c-415b-9675-6e1553cc97cb", "folderId": "18109fdd-40a2-4ee4-84d5-050dcedf571a", "title": "grammar_breakdown_6", "fileName": "grammar_breakdown_6.html", "filePath": "files/18109fdd-40a2-4ee4-84d5-050dcedf571a/grammar_breakdown_6.html", "date": "2025-12-03", "order": 5},
    {"id": "a8c55619-9940-4cb0-8acb-6793d2e6a48c", "folderId": "18109fdd-40a2-4ee4-84d5-050dcedf571a", "title": "grammar_breakdown_7", "fileName": "grammar_breakdown_7.html", "filePath": "files/18109fdd-40a2-4ee4-84d5-050dcedf571a/grammar_breakdown_7.html", "date": "2025-12-03", "order": 6},
    {"id": "bf7ecdc5-22a4-47b2-afe1-18c71a6f3e90", "folderId": "18109fdd-40a2-4ee4-84d5-050dcedf571a", "title": "grammar_breakdown_8", "fileName": "grammar_breakdown_8.html", "filePath": "files/18109fdd-40a2-4ee4-84d5-050dcedf571a/grammar_breakdown_8.html", "date": "2025-12-03", "order": 7},
    {"id": "faeb568e-c369-42d2-a346-e4981e7d097c", "folderId": "18109fdd-40a2-4ee4-84d5-050dcedf571a", "title": "grammar_breakdown_9", "fileName": "grammar_breakdown_9.html", "filePath": "files/18109fdd-40a2-4ee4-84d5-050dcedf571a/grammar_breakdown_9.html", "date": "2025-12-03", "order": 8},
    {"id": "030c8f0a-a16d-4bf1-a967-9810d6ec4365", "folderId": "18109fdd-40a2-4ee4-84d5-050dcedf571a", "title": "grammar_breakdown_10", "fileName": "grammar_breakdown_10.html", "filePath": "files/18109fdd-40a2-4ee4-84d5-050dcedf571a/grammar_breakdown_10.html", "date": "2025-12-03", "order": 9},
    {"id": "b7da5110-a68a-4d9e-880a-5d65cca41648", "folderId": "18109fdd-40a2-4ee4-84d5-050dcedf571a", "title": "polysemy_test_breakdown", "fileName": "polysemy_test_breakdown.html", "filePath": "files/18109fdd-40a2-4ee4-84d5-050dcedf571a/polysemy_test_breakdown.html", "date": "2025-12-03", "order": 10},
    {"id": "9f94d276-3677-4c66-ac0c-d4dfe956251c", "folderId": "aac20107-d8fb-4522-be26-96e73758d7b1", "title": "Grammar_Breakdown_ÊØîËºÉ", "fileName": "Grammar_Breakdown_ÊØîËºÉ.html", "filePath": "files/aac20107-d8fb-4522-be26-96e73758d7b1/Grammar_Breakdown_ÊØîËºÉ.html", "date": "2025-12-04", "order": 0},
    {"id": "db804e14-8b97-430d-a764-329cd1478a13", "folderId": "aac20107-d8fb-4522-be26-96e73758d7b1", "title": "Grammar_Breakdown_‰ªÆÂÆöÊ≥ï", "fileName": "Grammar_Breakdown_‰ªÆÂÆöÊ≥ï.html", "filePath": "files/aac20107-d8fb-4522-be26-96e73758d7b1/Grammar_Breakdown_‰ªÆÂÆöÊ≥ï.html", "date": "2025-12-04", "order": 1},
    {"id": "76d1d919-4552-46fd-a20c-abf987e2b361", "folderId": "aac20107-d8fb-4522-be26-96e73758d7b1", "title": "grammar_breakdown_ÂÆüÊà¶ÂïèÈ°å4", "fileName": "grammar_breakdown_ÂÆüÊà¶ÂïèÈ°å4.html", "filePath": "files/aac20107-d8fb-4522-be26-96e73758d7b1/grammar_breakdown_ÂÆüÊà¶ÂïèÈ°å4.html", "date": "2025-12-04", "order": 2},
    {"id": "c771898e-52c5-4750-a8e3-1de01986f0d9", "folderId": "aac20107-d8fb-4522-be26-96e73758d7b1", "title": "grammar_breakdown_Âê¶ÂÆö„ÉªÁâπÊÆäÊßãÊñá", "fileName": "grammar_breakdown_Âê¶ÂÆö„ÉªÁâπÊÆäÊßãÊñá.html", "filePath": "files/aac20107-d8fb-4522-be26-96e73758d7b1/grammar_breakdown_Âê¶ÂÆö„ÉªÁâπÊÆäÊßãÊñá.html", "date": "2025-12-04", "order": 3},
    {"id": "7f581045-1a8b-4fdf-8776-e2580a74b293", "folderId": "aac20107-d8fb-4522-be26-96e73758d7b1", "title": "grammar_breakdown_ÂÆüÊà¶ÂïèÈ°å3", "fileName": "grammar_breakdown_ÂÆüÊà¶ÂïèÈ°å3.html", "filePath": "files/aac20107-d8fb-4522-be26-96e73758d7b1/grammar_breakdown_ÂÆüÊà¶ÂïèÈ°å3.html", "date": "2025-12-04", "order": 4}
  ]
};
var REPO = "https://harashima-eng.github.io/English-Resources/";
var folders = DATA.folders || [];
var items = DATA.items || [];
var navStack = [];
var cur = null;

function $(id) { return document.getElementById(id); }
function esc(s) { return String(s || "").replace(/[&<>"']/g, function(c) { return ({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[c]; }); }
function isNew(d) { return d && (Date.now() - new Date(d)) / 864e5 <= 7; }
function getKids(p) { return folders.filter(function(f) { return f.parentId === p; }).sort(function(a, b) { return (a.order || 0) - (b.order || 0); }); }
function getCount(id) { var c = items.filter(function(i) { return i.folderId === id; }).length; getKids(id).forEach(function(k) { c += getCount(k.id); }); return c; }

function render() {
  var grid = $("grid"), ctrl = $("controls");
  if (!cur) {
    ctrl.style.display = "none";
    var roots = getKids(null);
    if (!roots.length) { grid.innerHTML = '<div class="empty"><div class="empty-icon">üìÅ</div><div class="empty-title">No Folders</div></div>'; return; }
    grid.innerHTML = roots.map(function(f) {
      var style = f.iconImage ? "background-image:url(" + f.iconImage + ");background-color:transparent;" : "background:" + (f.color || "#2997ff");
      return '<div class="folder" style="--glow:' + (f.color || "#2997ff") + '" onclick="openF(\'' + f.id + '\')"><div class="folder-icon" style="' + style + '">' + (f.iconImage ? "" : (f.icon || "üìÅ")) + '</div><div class="folder-name">' + esc(f.name) + '</div><div class="folder-count">' + getCount(f.id) + ' items</div></div>';
    }).join("");
    updateHdr();
    return;
  }
  ctrl.style.display = "flex";
  var q = $("search").value.toLowerCase();
  var sort = $("sort").value;
  var subs = getKids(cur);
  var its = items.filter(function(i) { return i.folderId === cur && (!q || (i.title || "").toLowerCase().indexOf(q) >= 0 || (i.keywords || "").toLowerCase().indexOf(q) >= 0); });
  its.sort(function(a, b) { return sort === "newest" ? (b.date || "").localeCompare(a.date || "") : sort === "oldest" ? (a.date || "").localeCompare(b.date || "") : (a.title || "").localeCompare(b.title || ""); });
  if (!subs.length && !its.length) { grid.innerHTML = '<div class="empty"><div class="empty-icon">üì≠</div><div class="empty-title">Empty</div></div>'; updateHdr(); return; }
  var html = "";
  subs.forEach(function(sf) {
    var style = sf.iconImage ? "background-image:url(" + sf.iconImage + ");background-color:transparent;" : "background:" + (sf.color || "#6b7280");
    html += '<div class="folder" style="--glow:' + (sf.color || "#6b7280") + '" onclick="openF(\'' + sf.id + '\')"><div class="folder-icon" style="' + style + '">' + (sf.iconImage ? "" : (sf.icon || "üìÅ")) + '</div><div class="folder-name">' + esc(sf.name) + '</div><div class="folder-count">' + getCount(sf.id) + ' items</div></div>';
  });
  its.forEach(function(it) {
    var feat = (it.tags || []).indexOf("Featured") >= 0;
    var tags = (it.tags || []).filter(function(t) { return t !== "Featured"; }).slice(0, 2).join(" ¬∑ ");
    var url = it.filePath ? REPO + it.filePath : "#";
    html += '<a href="' + esc(url) + '" target="_blank" class="item ' + (feat ? "featured" : "") + '"><div class="item-head"><span class="item-label">' + (tags || "Resource") + '</span>' + (isNew(it.date) ? '<span class="item-badge">NEW</span>' : "") + '</div><div class="item-title">' + esc(it.title || "Untitled") + '</div><div class="item-desc">' + esc(it.keywords || "") + '</div><div class="item-meta"><span>' + (it.date || "") + (it.minutes ? " ¬∑ " + it.minutes + "min" : "") + '</span><span class="item-link">Open ‚Üí</span></div></a>';
  });
  grid.innerHTML = html;
  updateHdr();
}

function openF(id) { if (cur) navStack.push(cur); cur = id; $("search").value = ""; render(); history.pushState({ folder: id }, "", "?folder=" + id); }
function goBack() { cur = navStack.pop() || null; $("search").value = ""; render(); history.pushState(cur ? { folder: cur } : {}, "", cur ? "?folder=" + cur : "?"); }

function updateHdr() {
  var back = $("backBtn"), icon = $("headerIcon"), title = $("headerTitle"), bc = $("headerBreadcrumb"), count = $("headerCount");
  if (!cur) {
    back.classList.remove("visible");
    icon.textContent = "üìö";
    icon.style.background = "#3c5277";
    icon.style.backgroundImage = "";
    title.textContent = "English Resources";
    bc.textContent = "Select a folder";
    count.textContent = getKids(null).length + " folders";
    return;
  }
  back.classList.add("visible");
  var f = folders.find(function(x) { return x.id === cur; });
  if (f && f.iconImage) { icon.style.backgroundImage = "url(" + f.iconImage + ")"; icon.style.background = "transparent"; icon.textContent = ""; }
  else { icon.textContent = f ? (f.icon || "üìÅ") : "üìÅ"; icon.style.background = f ? (f.color || "#6b7280") : "#6b7280"; icon.style.backgroundImage = ""; }
  title.textContent = f ? f.name : "Folder";
  var path = [];
  var p = f;
  while (p) { path.unshift(p.name); p = p.parentId ? folders.find(function(x) { return x.id === p.parentId; }) : null; }
  bc.textContent = path.join(" ‚Ä∫ ");
  count.textContent = getKids(cur).length + " folders, " + items.filter(function(i) { return i.folderId === cur; }).length + " items";
}

function checkUrl() {
  var p = new URLSearchParams(location.search).get("folder");
  if (p && folders.find(function(f) { return f.id === p; })) {
    cur = p;
    var f = folders.find(function(x) { return x.id === p; });
    while (f && f.parentId) { navStack.unshift(f.parentId); f = folders.find(function(x) { return x.id === f.parentId; }); }
  }
}

window.onpopstate = function(e) { cur = e.state ? e.state.folder : null; if (!cur) navStack = []; render(); };
var header = $("header"), trigger = $("trigger"), main = $("main");
var hideT, hovered = false;
function show() { clearTimeout(hideT); header.classList.remove("hidden"); main.classList.remove("shift"); }
function hide() { if (!hovered) { header.classList.add("hidden"); main.classList.add("shift"); } }
function schedule() { clearTimeout(hideT); hideT = setTimeout(hide, 2500); }
trigger.onmouseenter = show;
header.onmouseenter = function() { hovered = true; show(); };
header.onmouseleave = function() { hovered = false; schedule(); };
schedule();
$("search").oninput = render;
$("sort").onchange = render;
checkUrl();
render();
</script>
</body>
</html>
